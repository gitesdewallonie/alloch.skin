<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      lang="en"
      i18n:domain="plone">

<metal:javascriptslot fill-slot="javascript_head_slot"> 
    <tal:script tal:content="structure view/getRoomsMap">
    </tal:script>
</metal:javascriptslot>

<body>

<div metal:fill-slot="main"
     tal:define="hebs view/getRooms"
     i18n:domain="alloch">

    <div id="header" tal:condition="hebs">
        <div id="social-zone">
            <div id="facebook">
                <a href="http://www.facebook.com/GitesdeWallonie" target="_blank" title="Facebook"></a>
            </div>
        </div><!--social-zone-->

        <div id="header_map">
            <div id="map">
            </div>
        </div>
    </div>

    <script type="text/javascript">
        jQuery(document).ready(function() {
          load();  // loads map
        });
    </script>

    <div id="btn-back">
        <a class="back-link" href="javascript:history.back()"
           i18n:translate="back">&larr; Back</a>
    </div>

    <a href="javascript:this.print();" i18n:translate="print">Print</a>

    <h1 i18n:translate="rooms_title">Rooms</h1>
    <p>&nbsp;</p>
    <div>
        <div tal:define="lang request/LANGUAGE | fr"
             tal:condition="hebs">
            <div tal:repeat="heb hebs">
                <a href="" class="heb-detail-link" title="Details of this accomodation"
                   tal:attributes="href string:${context/portal_url}/heb-detail?hebPk=${heb/heb_pk}"
                   i18n:attributes="title details_of_this_heb">
                    <h2>
                        <img src="" border="0" tal:attributes="src string:${portal_url}/vignettes_heb/${heb/getVignette}" />
                        <span tal:replace="repeat/heb/number" />.&nbsp;
                        <span tal:replace="python: heb.type.getTitle(lang)" />
                        <span tal:replace="heb/heb_nom" />
                        &rarr;&nbsp;(<span tal:content="string:${heb/heb_cgt_cap_min}/${heb/heb_cgt_cap_max}" />)
                    </h2>
                </a>
                <span i18n:translate="nb_capacity">
                    <span tal:content="string:${heb/heb_cgt_cap_min}/${heb/heb_cgt_cap_max}" i18n:name="count" /> pers.
                </span>
                <br />
                <span tal:replace="python: heb.getDescription(lang)" />
                <br />
                <span tal:replace="python: heb.getDistribution(lang)" />
                <br /><br />
            </div>

        </div>
        <div tal:condition="not: hebs"
             i18n:translate="no_rooms">
            No rooms found.
        </div>
    </div>

</div>
</body>
</html>
